{% extends "base.html" %} {% load static %} {% block content %}
<link rel="stylesheet" href="{% static 'css/page/feedpage.css' %}" />

<!-- 게시물 필터 -->
<div class="filter-toggle">
  <button class="filter-btn all-btn active">ALL</button>
  <button class="filter-btn my-btn">MY</button>
</div>

<div class="feed-container">
  {% for feed in feeds %}
  <div
    class="post-card {% if feed.author == user %}my-post{% endif %}"
    data-post-id="{{ feed.id }}"
  >
    <div class="post-header">
      <img
        src="{% if feed.author.image %}{{ feed.author.image.url }}{% else %}{% static 'images/profile-default.svg' %}{% endif %}"
        alt="프로필"
        class="profile-img"
      />
      <div class="profile-info">
        <p class="username">
          {{ feed.author.nickname|default:feed.author.username }}
        </p>
        <p class="location">{{ feed.location }}</p>
      </div>
      <div class="more-wrapper">
        <img
          src="{% static 'images/more_icon.svg' %}"
          class="more-icon"
          alt="더보기"
        />
        <div class="more-menu hidden">
          <button class="menu-item report-button">게시물 신고</button>
        </div>
        <!-- 신고 모달 -->
        <div class="report-modal hidden">
          <div class="report-box">
            <p class="report-title">해당 게시물을 신고하시겠습니까?</p>
            <form class="report-reasons">
              <label class="reason-item">
                <input type="radio" name="report-reason" value="욕설" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>욕설 / 비속어</span>
              </label>
              <label class="reason-item">
                <input type="radio" name="report-reason" value="불쾌감" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>불쾌감 조성</span>
              </label>
              <label class="reason-item">
                <input type="radio" name="report-reason" value="광고" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>무단광고 / 홍보</span>
              </label>
              <label class="reason-item">
                <input type="radio" name="report-reason" value="음란" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>음란 / 선정적</span>
              </label>
              <label class="reason-item">
                <input type="radio" name="report-reason" value="기타" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>기타:</span>
                <input
                  type="text"
                  class="etc-reason"
                  name="report-reason-etc"
                />
              </label>
            </form>
            <div class="report-buttons">
              <button class="cancel-button">취소</button>
              <button class="hide-button">숨기기</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <img
      src="{% if feed.image %}{{ feed.image.url }}{% else %}{% static 'images/sample_photo2.jpg' %}{% endif %}"
      alt="게시물 사진"
      class="post-img"
    />

    <div class="post-footer">
      <p class="post-caption">{{ feed.content|default:feed.memo }}</p>
      <div class="icon-group">
        <img
          src="{% if feed.is_liked %}{% static 'images/heart_filled.svg' %}{% else %}{% static 'images/heart.svg' %}{% endif %}"
          alt="좋아요"
          class="icon heart-icon {% if feed.is_liked %}liked{% endif %}"
          data-post-id="{{ feed.id }}"
        />
        <span class="icon-count like-count" data-post-id="{{ feed.id }}"
          >{{ feed.likes.count }}</span
        >
        <img
          src="{% static 'images/comment.svg' %}"
          alt="댓글"
          class="icon comment-icon"
        />
        <span class="icon-count">{{ feed.comments.count }}</span>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="post-card my-post">
    <div class="post-header">
      <img
        src="{% static 'images/profile-default.svg' %}"
        alt="프로필"
        class="profile-img"
      />
      <div class="profile-info">
        <p class="username">{{ user.nickname|default:user.username }}</p>
        <p class="location">컴퓨터공학과 과방</p>
      </div>
      <div class="more-wrapper">
        <img
          src="{% static 'images/more_icon.svg' %}"
          class="more-icon"
          alt="더보기"
        />
        <div class="more-menu hidden">
          <button class="menu-item report-button">게시물 신고</button>
        </div>
        <!-- 신고 모달 -->
        <div class="report-modal hidden">
          <div class="report-box">
            <p class="report-title">해당 게시물을 신고하시겠습니까?</p>
            <form class="report-reasons">
              <label class="reason-item">
                <input type="radio" name="report-reason" value="욕설" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>욕설 / 비속어</span>
              </label>
              <label class="reason-item">
                <input type="radio" name="report-reason" value="불쾌감" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>불쾌감 조성</span>
              </label>
              <label class="reason-item">
                <input type="radio" name="report-reason" value="광고" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>무단광고 / 홍보</span>
              </label>
              <label class="reason-item">
                <input type="radio" name="report-reason" value="음란" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>음란 / 선정적</span>
              </label>
              <label class="reason-item">
                <input type="radio" name="report-reason" value="기타" />
                <img
                  src="{% static 'images/Ellipse.svg' %}"
                  class="check-icon"
                  alt="선택"
                />
                <span>기타:</span>
                <input
                  type="text"
                  class="etc-reason"
                  name="report-reason-etc"
                />
              </label>
            </form>
            <div class="report-buttons">
              <button class="cancel-button">취소</button>
              <button class="hide-button">숨기기</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="post-img no-image"></div>

    <div class="post-footer">
      <p class="post-caption">동기들과 한 컷</p>
      <div class="icon-group">
        <img
          src="{% static 'images/heart.svg' %}"
          alt="좋아요"
          class="icon heart-icon"
        />
        <span class="icon-count like-count">0</span>
        <img
          src="{% static 'images/comment.svg' %}"
          alt="댓글"
          class="icon comment-icon"
        />
        <span class="icon-count">0</span>
      </div>
    </div>
  </div>
  {% endfor %}

  <!-- 댓글 팝업 -->
  <div class="comment-popup hidden">
    <div class="comment-list">
      <!-- 댓글 아이템 예시 -->
      <div class="comment-item">
        <div class="comment-content">
          <img
            src="{% static 'images/sample_profile1.jpg' %}"
            class="comment-profile"
          />
          <div class="comment-text">
            <span class="comment-username">김멋사</span>
            <span class="comment-body">와 부럽다... 할 말이 없네....</span>
          </div>
        </div>
        <span class="comment-time">1일</span>
      </div>
      <!-- 나머지 댓글은 생략 가능 -->
    </div>

    <!-- 댓글 입력창 -->
    <div class="comment-input">
      <input type="text" placeholder="댓글을 입력해주세요." />
      <button>
        <img src="{% static 'images/send.svg' %}" alt="보내기" />
      </button>
    </div>
  </div>
</div>

<script src="{% static 'js/page/feedpage.js' %}"></script>
{% endblock %}
